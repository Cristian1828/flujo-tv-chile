---
import { waLink } from '../config/site';

type Plan = {
  badge?: string;
  name: string;
  price: number;
  period: string;
  highlight?: boolean;
  perks: string[];
  waText: string;
};

const plans: Plan[] = [
  {
    name: '1 Mes',
    price: 9,
    period: 'Pago único',
    perks: [
      'Acceso multimedia en vivo + catálogo',
      'Calidad HD y FHD (según conexión)',
      'Hasta 3 pantallas simultáneas',
      'Soporte garantizado'
    ],
    waText: 'Hola, quiero el plan de 1 mes ($9) para Flujo TV Chile.'
  },
  {
    badge: 'Más elegido',
    name: '3 Meses',
    price: 29,
    period: 'Pago único',
    highlight: true,
    perks: [
      'Mejor costo por mes',
      'Acceso multimedia en vivo + catálogo',
      'Calidad HD y FHD (según conexión)',
      'Hasta 3 pantallas simultáneas',
      'Soporte garantizado'
    ],
    waText: 'Hola, quiero el plan de 3 meses ($29) para Flujo TV Chile.'
  },
  {
    badge: 'Ahorro',
    name: '6 Meses',
    price: 49,
    period: 'Pago único',
    perks: [
      'Incluye 1 mes gratis',
      'Ideal para familias',
      'Acceso multimedia en vivo + catálogo',
      'Calidad HD/4K (según conexión)',
      'Hasta 3 pantallas simultáneas',
      'Soporte garantizado'
    ],
    waText: 'Hola, quiero el plan de 6 meses ($49) para Flujo TV Chile.'
  },
  {
    badge: 'Mejor valor',
    name: '12 Meses',
    price: 99,
    period: 'Pago único',
    perks: [
      'Incluye 2 meses gratis',
      'Tranquilidad todo el año',
      'Acceso multimedia en vivo + catálogo',
      'Calidad HD/4K (según conexión)',
      'Hasta 3 pantallas simultáneas',
      'Soporte garantizado'
    ],
    waText: 'Hola, quiero el plan de 12 meses ($99) para Flujo TV Chile.'
  }
];

const payHref = waLink('Hola, tengo dudas sobre los métodos de pago para Flujo TV Chile.');
---

<section id="planes" class="mx-auto max-w-6xl px-4 py-14">
  <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-6">
    <div>
      <h2 class="font-display text-3xl md:text-4xl font-extrabold">Planes para empezar hoy</h2>
      <p class="mt-2 text-white/70 max-w-2xl">
        Misma experiencia premium en todos los planes. Cambia el tiempo y el ahorro.
      </p>
    </div>
    <a
      href={payHref}
      target="_blank"
      rel="noopener noreferrer"
      class="inline-flex items-center justify-center rounded-2xl px-6 py-4 font-semibold bg-white/5 border border-white/10 hover:bg-white/10 hover:border-white/20 transition"
    >
      Consultar pagos
    </a>
  </div>

  <div class="mt-8 grid gap-4 md:grid-cols-2 lg:grid-cols-4">
    {plans.map((p) => (
      <div class={`relative rounded-[26px] p-6 border ${p.highlight ? 'border-lime-300/30 bg-white/8' : 'border-white/10 bg-white/5'} overflow-hidden`}>
        <div class="absolute -top-24 -right-24 h-56 w-56 rounded-full blur-3xl bg-sky-400/10"></div>

        <div class="relative">
          {p.badge && (
            <div class="inline-flex items-center rounded-full border border-white/10 bg-white/5 px-3 py-1 text-[11px] text-white/70">
              {p.badge}
            </div>
          )}

          <h3 class="mt-4 font-display text-2xl font-extrabold">{p.name}</h3>

          <div class="mt-3 flex items-end gap-2">
            <div class="text-4xl font-extrabold">${p.price}</div>
            <div class="pb-1 text-sm text-white/60">{p.period}</div>
          </div>

          <ul class="mt-4 space-y-2 text-sm text-white/75">
            {p.perks.map((perk) => (
              <li class="flex gap-2">
                <span class="mt-1 h-1.5 w-1.5 rounded-full bg-lime-300/80"></span>
                <span>{perk}</span>
              </li>
            ))}
          </ul>

          <a
            href={waLink(p.waText)}
            target="_blank"
            rel="noopener noreferrer"
            class={`mt-6 inline-flex w-full items-center justify-center rounded-2xl px-4 py-3 font-semibold transition border ${p.highlight ? 'bg-gradient-to-r from-lime-300/25 to-sky-400/25 border-white/15 hover:border-white/25' : 'bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20'}`}
          >
            Elegir plan
          </a>
        </div>
      </div>
    ))}
  </div>

  <p class="mt-6 text-xs text-white/55">
    Nota: La calidad final depende de tu conexión y del dispositivo. Requiere internet estable.
  </p>
</section>
