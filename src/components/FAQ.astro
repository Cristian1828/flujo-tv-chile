---
import { waLink, site } from '../config/site';

const faqs = [
  {
    q: '¿Qué es Flujo TV?',
    a: 'Flujo TV es un servicio premium de television en vivo y catálogo bajo demanda. Está diseñado para funcionar en dispositivos Android y compatibles.'
  },
  {
    q: '¿En cuántas pantallas puedo ver al mismo tiempo?',
    a: 'Hasta 3 pantallas simultáneas, según el plan y el uso recomendado.'
  },
  {
    q: '¿Qué dispositivos son compatibles?',
    a: 'Android (celular/tablet), TV Box Android, Fire Stick, Google TV, Xiaomi Stick y computadora/laptop (con emulador Android). Si tu TV no es Android, necesitas TV Box o stick compatible.'
  },
  {
    q: '¿Cómo recibo mis datos de acceso?',
    a: `Tras la compra, enviamos tus credenciales por WhatsApp o al correo ${site.supportEmail}.` 
  },
  {
    q: '¿Qué internet necesito para usarlo?',
    a: 'Recomendamos una conexión estable. Para HD suele bastar con ~10 Mbps; para 4K, idealmente 20 Mbps o más (por dispositivo).'
  },
  {
    q: '¿Ofrecen plan sin costo?',
    a: 'No. Es un servicio premium y la activación se realiza con un plan vigente.'
  },
  {
    q: '¿Tengo que descargar algo antes de comprar?',
    a: 'Lo recomendable es activar primero. Luego te enviamos la app y la guía correcta según tu dispositivo.'
  },
  {
    q: '¿Qué pasa si necesito ayuda?',
    a: 'Tienes soporte garantizado. Te guiamos por WhatsApp para instalar y empezar.'
  }
];

const askHref = waLink('Hola, tengo una consulta sobre Flujo TV Chile.');

const faqSchema = {
  '@context': 'https://schema.org',
  '@type': 'FAQPage',
  mainEntity: faqs.map((f) => ({
    '@type': 'Question',
    name: f.q,
    acceptedAnswer: {
      '@type': 'Answer',
      text: f.a
    }
  }))
};
---

<section id="preguntas" class="mx-auto max-w-6xl px-4 py-12 md:py-14">
  <script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />
  <div class="grid gap-6 md:gap-8 md:grid-cols-[1.15fr_0.85fr] items-start">
    <div>
      <h2 class="font-display text-3xl md:text-4xl font-extrabold">Preguntas frecuentes</h2>
      <p class="mt-2 text-white/70 max-w-xl">
        Respuestas claras para que sepas exactamente qué compras.
      </p>

      <div class="mt-7 md:mt-8 space-y-3">
        {faqs.map((f) => (
          <details class="glass rounded-2xl p-5 md:p-6">
            <summary class="cursor-pointer list-none flex items-center justify-between gap-4">
              <span class="font-semibold text-sm md:text-base">{f.q}</span>
              <span class="text-white/50 text-lg leading-none">+</span>
            </summary>
            <p class="mt-3 text-sm md:text-base text-white/75">{f.a}</p>
          </details>
        ))}
      </div>
    </div>

    <div class="glass rounded-[28px] p-6 md:p-8 h-fit md:sticky md:top-24">
      <h3 class="font-display text-2xl font-extrabold">¿Tienes otra pregunta?</h3>
      <p class="mt-2 text-white/70">
        Escríbenos por WhatsApp y te respondemos con una recomendación según tu dispositivo.
      </p>
      <a
        href={askHref}
        target="_blank"
        rel="noopener noreferrer"
        class="mt-5 md:mt-6 inline-flex w-full items-center justify-center gap-3 rounded-2xl px-6 py-4 font-semibold bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 transition"
      >
        Contactar por WhatsApp
      </a>
      <p class="mt-4 text-xs text-white/55">
        Soporte: {site.supportEmail}
      </p>
    </div>
  </div>
</section>

<style>
  summary::-webkit-details-marker {
    display: none;
  }
</style>
